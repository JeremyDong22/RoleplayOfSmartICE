<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Undefined Period Fix</title>
</head>
<body>
    <h1>Test Steps for Undefined Period Bug</h1>
    
    <h2>Bug Description:</h2>
    <p>When the Manager swipes to confirm the last customer left during pre-closing period, 
    the TaskCountdown component crashes with "Cannot read properties of undefined (reading 'id')"</p>
    
    <h2>Fix Applied:</h2>
    <ul>
        <li>Added null checks for period prop throughout TaskCountdown component</li>
        <li>Added early return if period is undefined</li>
        <li>Used optional chaining (period?.id) in all period property accesses</li>
    </ul>
    
    <h2>Test Steps:</h2>
    <ol>
        <li>Open the app in two tabs - one as Manager, one as Chef</li>
        <li>Set time to 21:30 (pre-closing period) using the time editor</li>
        <li>In the Manager tab, you should see the green swipe card "最后一位客人离店"</li>
        <li>Swipe the green card all the way to the right to confirm</li>
        <li>Check that:
            <ul>
                <li>Manager dashboard transitions to closing period without errors</li>
                <li>Chef dashboard remains stable without crashing</li>
                <li>No console errors appear</li>
            </ul>
        </li>
    </ol>
    
    <h2>Expected Result:</h2>
    <p>Both dashboards should work properly without any "undefined" errors. The Manager should see closing tasks, 
    while the Chef should remain in their current state (pre-closing or waiting).</p>
</body>
</html>